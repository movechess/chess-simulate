{
  "version": 3,
  "sources": ["../../@bity/oauth2-auth-code-pkce/index.js"],
  "sourcesContent": ["\"use strict\";\n/**\n * An implementation of rfc6749#section-4.1 and rfc7636.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n;\n;\n;\n/**\n * A list of OAuth2AuthCodePKCE errors.\n */\n// To \"namespace\" all errors.\nvar ErrorOAuth2 = /** @class */ (function () {\n    function ErrorOAuth2() {\n    }\n    ErrorOAuth2.prototype.toString = function () { return 'ErrorOAuth2'; };\n    return ErrorOAuth2;\n}());\nexports.ErrorOAuth2 = ErrorOAuth2;\n// For really unknown errors.\nvar ErrorUnknown = /** @class */ (function (_super) {\n    __extends(ErrorUnknown, _super);\n    function ErrorUnknown() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorUnknown.prototype.toString = function () { return 'ErrorUnknown'; };\n    return ErrorUnknown;\n}(ErrorOAuth2));\nexports.ErrorUnknown = ErrorUnknown;\n// Some generic, internal errors that can happen.\nvar ErrorNoAuthCode = /** @class */ (function (_super) {\n    __extends(ErrorNoAuthCode, _super);\n    function ErrorNoAuthCode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorNoAuthCode.prototype.toString = function () { return 'ErrorNoAuthCode'; };\n    return ErrorNoAuthCode;\n}(ErrorOAuth2));\nexports.ErrorNoAuthCode = ErrorNoAuthCode;\nvar ErrorInvalidReturnedStateParam = /** @class */ (function (_super) {\n    __extends(ErrorInvalidReturnedStateParam, _super);\n    function ErrorInvalidReturnedStateParam() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorInvalidReturnedStateParam.prototype.toString = function () { return 'ErrorInvalidReturnedStateParam'; };\n    return ErrorInvalidReturnedStateParam;\n}(ErrorOAuth2));\nexports.ErrorInvalidReturnedStateParam = ErrorInvalidReturnedStateParam;\nvar ErrorInvalidJson = /** @class */ (function (_super) {\n    __extends(ErrorInvalidJson, _super);\n    function ErrorInvalidJson() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorInvalidJson.prototype.toString = function () { return 'ErrorInvalidJson'; };\n    return ErrorInvalidJson;\n}(ErrorOAuth2));\nexports.ErrorInvalidJson = ErrorInvalidJson;\n// Errors that occur across many endpoints\nvar ErrorInvalidScope = /** @class */ (function (_super) {\n    __extends(ErrorInvalidScope, _super);\n    function ErrorInvalidScope() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorInvalidScope.prototype.toString = function () { return 'ErrorInvalidScope'; };\n    return ErrorInvalidScope;\n}(ErrorOAuth2));\nexports.ErrorInvalidScope = ErrorInvalidScope;\nvar ErrorInvalidRequest = /** @class */ (function (_super) {\n    __extends(ErrorInvalidRequest, _super);\n    function ErrorInvalidRequest() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorInvalidRequest.prototype.toString = function () { return 'ErrorInvalidRequest'; };\n    return ErrorInvalidRequest;\n}(ErrorOAuth2));\nexports.ErrorInvalidRequest = ErrorInvalidRequest;\nvar ErrorInvalidToken = /** @class */ (function (_super) {\n    __extends(ErrorInvalidToken, _super);\n    function ErrorInvalidToken() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorInvalidToken.prototype.toString = function () { return 'ErrorInvalidToken'; };\n    return ErrorInvalidToken;\n}(ErrorOAuth2));\nexports.ErrorInvalidToken = ErrorInvalidToken;\n/**\n * Possible authorization grant errors given by the redirection from the\n * authorization server.\n */\nvar ErrorAuthenticationGrant = /** @class */ (function (_super) {\n    __extends(ErrorAuthenticationGrant, _super);\n    function ErrorAuthenticationGrant() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorAuthenticationGrant.prototype.toString = function () { return 'ErrorAuthenticationGrant'; };\n    return ErrorAuthenticationGrant;\n}(ErrorOAuth2));\nexports.ErrorAuthenticationGrant = ErrorAuthenticationGrant;\nvar ErrorUnauthorizedClient = /** @class */ (function (_super) {\n    __extends(ErrorUnauthorizedClient, _super);\n    function ErrorUnauthorizedClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorUnauthorizedClient.prototype.toString = function () { return 'ErrorUnauthorizedClient'; };\n    return ErrorUnauthorizedClient;\n}(ErrorAuthenticationGrant));\nexports.ErrorUnauthorizedClient = ErrorUnauthorizedClient;\nvar ErrorAccessDenied = /** @class */ (function (_super) {\n    __extends(ErrorAccessDenied, _super);\n    function ErrorAccessDenied() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorAccessDenied.prototype.toString = function () { return 'ErrorAccessDenied'; };\n    return ErrorAccessDenied;\n}(ErrorAuthenticationGrant));\nexports.ErrorAccessDenied = ErrorAccessDenied;\nvar ErrorUnsupportedResponseType = /** @class */ (function (_super) {\n    __extends(ErrorUnsupportedResponseType, _super);\n    function ErrorUnsupportedResponseType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorUnsupportedResponseType.prototype.toString = function () { return 'ErrorUnsupportedResponseType'; };\n    return ErrorUnsupportedResponseType;\n}(ErrorAuthenticationGrant));\nexports.ErrorUnsupportedResponseType = ErrorUnsupportedResponseType;\nvar ErrorServerError = /** @class */ (function (_super) {\n    __extends(ErrorServerError, _super);\n    function ErrorServerError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorServerError.prototype.toString = function () { return 'ErrorServerError'; };\n    return ErrorServerError;\n}(ErrorAuthenticationGrant));\nexports.ErrorServerError = ErrorServerError;\nvar ErrorTemporarilyUnavailable = /** @class */ (function (_super) {\n    __extends(ErrorTemporarilyUnavailable, _super);\n    function ErrorTemporarilyUnavailable() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorTemporarilyUnavailable.prototype.toString = function () { return 'ErrorTemporarilyUnavailable'; };\n    return ErrorTemporarilyUnavailable;\n}(ErrorAuthenticationGrant));\nexports.ErrorTemporarilyUnavailable = ErrorTemporarilyUnavailable;\n/**\n * A list of possible access token response errors.\n */\nvar ErrorAccessTokenResponse = /** @class */ (function (_super) {\n    __extends(ErrorAccessTokenResponse, _super);\n    function ErrorAccessTokenResponse() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorAccessTokenResponse.prototype.toString = function () { return 'ErrorAccessTokenResponse'; };\n    return ErrorAccessTokenResponse;\n}(ErrorOAuth2));\nexports.ErrorAccessTokenResponse = ErrorAccessTokenResponse;\nvar ErrorInvalidClient = /** @class */ (function (_super) {\n    __extends(ErrorInvalidClient, _super);\n    function ErrorInvalidClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorInvalidClient.prototype.toString = function () { return 'ErrorInvalidClient'; };\n    return ErrorInvalidClient;\n}(ErrorAccessTokenResponse));\nexports.ErrorInvalidClient = ErrorInvalidClient;\nvar ErrorInvalidGrant = /** @class */ (function (_super) {\n    __extends(ErrorInvalidGrant, _super);\n    function ErrorInvalidGrant() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorInvalidGrant.prototype.toString = function () { return 'ErrorInvalidGrant'; };\n    return ErrorInvalidGrant;\n}(ErrorAccessTokenResponse));\nexports.ErrorInvalidGrant = ErrorInvalidGrant;\nvar ErrorUnsupportedGrantType = /** @class */ (function (_super) {\n    __extends(ErrorUnsupportedGrantType, _super);\n    function ErrorUnsupportedGrantType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorUnsupportedGrantType.prototype.toString = function () { return 'ErrorUnsupportedGrantType'; };\n    return ErrorUnsupportedGrantType;\n}(ErrorAccessTokenResponse));\nexports.ErrorUnsupportedGrantType = ErrorUnsupportedGrantType;\n/**\n * WWW-Authenticate error object structure for less error prone handling.\n */\nvar ErrorWWWAuthenticate = /** @class */ (function () {\n    function ErrorWWWAuthenticate() {\n        this.realm = \"\";\n        this.error = \"\";\n    }\n    return ErrorWWWAuthenticate;\n}());\nexports.ErrorWWWAuthenticate = ErrorWWWAuthenticate;\nexports.RawErrorToErrorClassMap = {\n    invalid_request: ErrorInvalidRequest,\n    invalid_grant: ErrorInvalidGrant,\n    unauthorized_client: ErrorUnauthorizedClient,\n    access_denied: ErrorAccessDenied,\n    unsupported_response_type: ErrorUnsupportedResponseType,\n    invalid_scope: ErrorInvalidScope,\n    server_error: ErrorServerError,\n    temporarily_unavailable: ErrorTemporarilyUnavailable,\n    invalid_client: ErrorInvalidClient,\n    unsupported_grant_type: ErrorUnsupportedGrantType,\n    invalid_json: ErrorInvalidJson,\n    invalid_token: ErrorInvalidToken,\n};\n/**\n * Translate the raw error strings returned from the server into error classes.\n */\nfunction toErrorClass(rawError) {\n    return new (exports.RawErrorToErrorClassMap[rawError] || ErrorUnknown)();\n}\nexports.toErrorClass = toErrorClass;\n/**\n * A convience function to turn, for example, `Bearer realm=\"bity.com\",\n * error=\"invalid_client\"` into `{ realm: \"bity.com\", error: \"invalid_client\"\n * }`.\n */\nfunction fromWWWAuthenticateHeaderStringToObject(a) {\n    var obj = a\n        .slice(\"Bearer \".length)\n        .replace(/\"/g, '')\n        .split(', ')\n        .map(function (tokens) {\n        var _a;\n        var _b = tokens.split('='), k = _b[0], v = _b[1];\n        return _a = {}, _a[k] = v, _a;\n    })\n        .reduce(function (a, c) { return (__assign(__assign({}, a), c)); }, {});\n    return { realm: obj.realm, error: obj.error };\n}\nexports.fromWWWAuthenticateHeaderStringToObject = fromWWWAuthenticateHeaderStringToObject;\n/**\n * HTTP headers that we need to access.\n */\nvar HEADER_AUTHORIZATION = \"Authorization\";\nvar HEADER_WWW_AUTHENTICATE = \"WWW-Authenticate\";\n/**\n * To store the OAuth client's data between websites due to redirection.\n */\nexports.LOCALSTORAGE_ID = \"oauth2authcodepkce\";\nexports.LOCALSTORAGE_STATE = exports.LOCALSTORAGE_ID + \"-state\";\n/**\n * The maximum length for a code verifier for the best security we can offer.\n * Please note the NOTE section of RFC 7636 § 4.1 - the length must be >= 43,\n * but <= 128, **after** base64 url encoding. This means 32 code verifier bytes\n * encoded will be 43 bytes, or 96 bytes encoded will be 128 bytes. So 96 bytes\n * is the highest valid value that can be used.\n */\nexports.RECOMMENDED_CODE_VERIFIER_LENGTH = 96;\n/**\n * A sensible length for the state's length, for anti-csrf.\n */\nexports.RECOMMENDED_STATE_LENGTH = 32;\n/**\n * Character set to generate code verifier defined in rfc7636.\n */\nvar PKCE_CHARSET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';\n/**\n * OAuth 2.0 client that ONLY supports authorization code flow, with PKCE.\n *\n * Many applications structure their OAuth usage in different ways. This class\n * aims to provide both flexible and easy ways to use this configuration of\n * OAuth.\n *\n * See `example.ts` for how you'd typically use this.\n *\n * For others, review this class's methods.\n */\nvar OAuth2AuthCodePKCE = /** @class */ (function () {\n    function OAuth2AuthCodePKCE(config) {\n        this.state = {};\n        this.config = config;\n        this.recoverState();\n        return this;\n    }\n    /**\n     * Attach the OAuth logic to all fetch requests and translate errors (either\n     * returned as json or through the WWW-Authenticate header) into nice error\n     * classes.\n     */\n    OAuth2AuthCodePKCE.prototype.decorateFetchHTTPClient = function (fetch) {\n        var _this = this;\n        return function (url, config) {\n            var rest = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                rest[_i - 2] = arguments[_i];\n            }\n            if (!_this.state.isHTTPDecoratorActive) {\n                return fetch.apply(void 0, __spreadArrays([url, config], rest));\n            }\n            return _this\n                .getAccessToken()\n                .then(function (_a) {\n                var token = _a.token;\n                var configNew = Object.assign({}, config);\n                if (!configNew.headers) {\n                    configNew.headers = {};\n                }\n                configNew.headers[HEADER_AUTHORIZATION] = \"Bearer \" + token.value;\n                return fetch.apply(void 0, __spreadArrays([url, configNew], rest));\n            })\n                .then(function (res) {\n                if (res.ok) {\n                    return res;\n                }\n                if (!res.headers.has(HEADER_WWW_AUTHENTICATE.toLowerCase())) {\n                    return res;\n                }\n                var error = toErrorClass(fromWWWAuthenticateHeaderStringToObject(res.headers.get(HEADER_WWW_AUTHENTICATE.toLowerCase())).error);\n                if (error instanceof ErrorInvalidToken) {\n                    _this.config\n                        .onAccessTokenExpiry(function () { return _this.exchangeRefreshTokenForAccessToken(); });\n                }\n                return Promise.reject(error);\n            });\n        };\n    };\n    /**\n     * If there is an error, it will be passed back as a rejected Promise.\n     * If there is no code, the user should be redirected via\n     * [fetchAuthorizationCode].\n     */\n    OAuth2AuthCodePKCE.prototype.isReturningFromAuthServer = function () {\n        var error = OAuth2AuthCodePKCE.extractParamFromUrl(location.href, 'error');\n        if (error) {\n            return Promise.reject(toErrorClass(error));\n        }\n        var code = OAuth2AuthCodePKCE.extractParamFromUrl(location.href, 'code');\n        if (!code) {\n            return Promise.resolve(false);\n        }\n        var state = JSON.parse(localStorage.getItem(exports.LOCALSTORAGE_STATE) || '{}');\n        var stateQueryParam = OAuth2AuthCodePKCE.extractParamFromUrl(location.href, 'state');\n        if (stateQueryParam !== state.stateQueryParam) {\n            console.warn(\"state query string parameter doesn't match the one sent! Possible malicious activity somewhere.\");\n            return Promise.reject(new ErrorInvalidReturnedStateParam());\n        }\n        state.authorizationCode = code;\n        state.hasAuthCodeBeenExchangedForAccessToken = false;\n        localStorage.setItem(exports.LOCALSTORAGE_STATE, JSON.stringify(state));\n        this.setState(state);\n        return Promise.resolve(true);\n    };\n    /**\n     * Fetch an authorization grant via redirection. In a sense this function\n     * doesn't return because of the redirect behavior (uses `location.replace`).\n     *\n     * @param oneTimeParams A way to specify \"one time\" used query string\n     * parameters during the authorization code fetching process, usually for\n     * values which need to change at run-time.\n     */\n    OAuth2AuthCodePKCE.prototype.fetchAuthorizationCode = function (oneTimeParams) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, clientId, extraAuthorizationParams, redirectUrl, scopes, _b, codeChallenge, codeVerifier, stateQueryParam, url, extraParameters;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        this.assertStateAndConfigArePresent();\n                        _a = this.config, clientId = _a.clientId, extraAuthorizationParams = _a.extraAuthorizationParams, redirectUrl = _a.redirectUrl, scopes = _a.scopes;\n                        return [4 /*yield*/, OAuth2AuthCodePKCE\n                                .generatePKCECodes()];\n                    case 1:\n                        _b = _c.sent(), codeChallenge = _b.codeChallenge, codeVerifier = _b.codeVerifier;\n                        stateQueryParam = OAuth2AuthCodePKCE\n                            .generateRandomState(exports.RECOMMENDED_STATE_LENGTH);\n                        this.state = __assign(__assign({}, this.state), { codeChallenge: codeChallenge,\n                            codeVerifier: codeVerifier,\n                            stateQueryParam: stateQueryParam, isHTTPDecoratorActive: true });\n                        localStorage.setItem(exports.LOCALSTORAGE_STATE, JSON.stringify(this.state));\n                        url = this.config.authorizationUrl\n                            + \"?response_type=code&\"\n                            + (\"client_id=\" + encodeURIComponent(clientId) + \"&\")\n                            + (\"redirect_uri=\" + encodeURIComponent(redirectUrl) + \"&\")\n                            + (\"scope=\" + encodeURIComponent(scopes.join(' ')) + \"&\")\n                            + (\"state=\" + stateQueryParam + \"&\")\n                            + (\"code_challenge=\" + encodeURIComponent(codeChallenge) + \"&\")\n                            + \"code_challenge_method=S256\";\n                        if (extraAuthorizationParams || oneTimeParams) {\n                            extraParameters = __assign(__assign({}, extraAuthorizationParams), oneTimeParams);\n                            url = url + \"&\" + OAuth2AuthCodePKCE.objectToQueryString(extraParameters);\n                        }\n                        location.replace(url);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Tries to get the current access token. If there is none\n     * it will fetch another one. If it is expired, it will fire\n     * [onAccessTokenExpiry] but it's up to the user to call the refresh token\n     * function. This is because sometimes not using the refresh token facilities\n     * is easier.\n     */\n    OAuth2AuthCodePKCE.prototype.getAccessToken = function () {\n        var _this = this;\n        this.assertStateAndConfigArePresent();\n        var onAccessTokenExpiry = this.config.onAccessTokenExpiry;\n        var _a = this.state, accessToken = _a.accessToken, authorizationCode = _a.authorizationCode, explicitlyExposedTokens = _a.explicitlyExposedTokens, hasAuthCodeBeenExchangedForAccessToken = _a.hasAuthCodeBeenExchangedForAccessToken, refreshToken = _a.refreshToken, scopes = _a.scopes;\n        if (!authorizationCode) {\n            return Promise.reject(new ErrorNoAuthCode());\n        }\n        if (this.authCodeForAccessTokenRequest) {\n            return this.authCodeForAccessTokenRequest;\n        }\n        if (!this.isAuthorized() || !hasAuthCodeBeenExchangedForAccessToken) {\n            this.authCodeForAccessTokenRequest = this.exchangeAuthCodeForAccessToken();\n            return this.authCodeForAccessTokenRequest;\n        }\n        // Depending on the server (and config), refreshToken may not be available.\n        if (refreshToken && this.isAccessTokenExpired()) {\n            return onAccessTokenExpiry(function () { return _this.exchangeRefreshTokenForAccessToken(); });\n        }\n        return Promise.resolve({\n            token: accessToken,\n            explicitlyExposedTokens: explicitlyExposedTokens,\n            scopes: scopes,\n            refreshToken: refreshToken\n        });\n    };\n    /**\n     * Refresh an access token from the remote service.\n     */\n    OAuth2AuthCodePKCE.prototype.exchangeRefreshTokenForAccessToken = function () {\n        var _this = this;\n        var _a;\n        this.assertStateAndConfigArePresent();\n        var _b = this.config, extraRefreshParams = _b.extraRefreshParams, clientId = _b.clientId, tokenUrl = _b.tokenUrl;\n        var refreshToken = this.state.refreshToken;\n        if (!refreshToken) {\n            console.warn('No refresh token is present.');\n        }\n        var url = tokenUrl;\n        var body = \"grant_type=refresh_token&\"\n            + (\"refresh_token=\" + ((_a = refreshToken) === null || _a === void 0 ? void 0 : _a.value) + \"&\")\n            + (\"client_id=\" + clientId);\n        if (extraRefreshParams) {\n            body = url + \"&\" + OAuth2AuthCodePKCE.objectToQueryString(extraRefreshParams);\n        }\n        return fetch(url, {\n            method: 'POST',\n            body: body,\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            }\n        })\n            .then(function (res) { return res.status >= 400 ? res.json().then(function (data) { return Promise.reject(data); }) : res.json(); })\n            .then(function (json) {\n            var access_token = json.access_token, expires_in = json.expires_in, refresh_token = json.refresh_token, scope = json.scope;\n            var explicitlyExposedTokens = _this.config.explicitlyExposedTokens;\n            var scopes = [];\n            var tokensToExpose = {};\n            var accessToken = {\n                value: access_token,\n                expiry: (new Date(Date.now() + (parseInt(expires_in) * 1000))).toString()\n            };\n            _this.state.accessToken = accessToken;\n            if (refresh_token) {\n                var refreshToken_1 = {\n                    value: refresh_token\n                };\n                _this.state.refreshToken = refreshToken_1;\n            }\n            if (explicitlyExposedTokens) {\n                tokensToExpose = Object.fromEntries(explicitlyExposedTokens\n                    .map(function (tokenName) { return [tokenName, json[tokenName]]; })\n                    .filter(function (_a) {\n                    var _ = _a[0], tokenValue = _a[1];\n                    return tokenValue !== undefined;\n                }));\n                _this.state.explicitlyExposedTokens = tokensToExpose;\n            }\n            if (scope) {\n                // Multiple scopes are passed and delimited by spaces,\n                // despite using the singular name \"scope\".\n                scopes = scope.split(' ');\n                _this.state.scopes = scopes;\n            }\n            localStorage.setItem(exports.LOCALSTORAGE_STATE, JSON.stringify(_this.state));\n            var accessContext = { token: accessToken, scopes: scopes };\n            if (explicitlyExposedTokens) {\n                accessContext.explicitlyExposedTokens = tokensToExpose;\n            }\n            return accessContext;\n        })\n            .catch(function (data) {\n            var onInvalidGrant = _this.config.onInvalidGrant;\n            var error = data.error || 'There was a network error.';\n            switch (error) {\n                case 'invalid_grant':\n                    onInvalidGrant(function () { return _this.fetchAuthorizationCode(); });\n                    break;\n                default:\n                    break;\n            }\n            return Promise.reject(toErrorClass(error));\n        });\n    };\n    /**\n     * Get the scopes that were granted by the authorization server.\n     */\n    OAuth2AuthCodePKCE.prototype.getGrantedScopes = function () {\n        return this.state.scopes;\n    };\n    /**\n     * Signals if OAuth HTTP decorating should be active or not.\n     */\n    OAuth2AuthCodePKCE.prototype.isHTTPDecoratorActive = function (isActive) {\n        this.state.isHTTPDecoratorActive = isActive;\n        localStorage.setItem(exports.LOCALSTORAGE_STATE, JSON.stringify(this.state));\n    };\n    /**\n     * Tells if the client is authorized or not. This means the client has at\n     * least once successfully fetched an access token. The access token could be\n     * expired.\n     */\n    OAuth2AuthCodePKCE.prototype.isAuthorized = function () {\n        return !!this.state.accessToken;\n    };\n    /**\n     * Checks to see if the access token has expired.\n     */\n    OAuth2AuthCodePKCE.prototype.isAccessTokenExpired = function () {\n        var accessToken = this.state.accessToken;\n        return Boolean(accessToken && (new Date()) >= (new Date(accessToken.expiry)));\n    };\n    /**\n     * Resets the state of the client. Equivalent to \"logging out\" the user.\n     */\n    OAuth2AuthCodePKCE.prototype.reset = function () {\n        this.setState({});\n        this.authCodeForAccessTokenRequest = undefined;\n    };\n    /**\n     * If the state or config are missing, it means the client is in a bad state.\n     * This should never happen, but the check is there just in case.\n     */\n    OAuth2AuthCodePKCE.prototype.assertStateAndConfigArePresent = function () {\n        if (!this.state || !this.config) {\n            console.error('state:', this.state, 'config:', this.config);\n            throw new Error('state or config is not set.');\n        }\n    };\n    /**\n     * Fetch an access token from the remote service. You may pass a custom\n     * authorization grant code for any reason, but this is non-standard usage.\n     */\n    OAuth2AuthCodePKCE.prototype.exchangeAuthCodeForAccessToken = function (codeOverride) {\n        var _this = this;\n        this.assertStateAndConfigArePresent();\n        var _a = this.state, _b = _a.authorizationCode, authorizationCode = _b === void 0 ? codeOverride : _b, _c = _a.codeVerifier, codeVerifier = _c === void 0 ? '' : _c;\n        var _d = this.config, clientId = _d.clientId, onInvalidGrant = _d.onInvalidGrant, redirectUrl = _d.redirectUrl;\n        if (!codeVerifier) {\n            console.warn('No code verifier is being sent.');\n        }\n        else if (!authorizationCode) {\n            console.warn('No authorization grant code is being passed.');\n        }\n        var url = this.config.tokenUrl;\n        var body = \"grant_type=authorization_code&\"\n            + (\"code=\" + encodeURIComponent(authorizationCode || '') + \"&\")\n            + (\"redirect_uri=\" + encodeURIComponent(redirectUrl) + \"&\")\n            + (\"client_id=\" + encodeURIComponent(clientId) + \"&\")\n            + (\"code_verifier=\" + codeVerifier);\n        return fetch(url, {\n            method: 'POST',\n            body: body,\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            }\n        })\n            .then(function (res) {\n            var jsonPromise = res.json()\n                .catch(function (_) { return ({ error: 'invalid_json' }); });\n            if (!res.ok) {\n                return jsonPromise.then(function (_a) {\n                    var error = _a.error;\n                    switch (error) {\n                        case 'invalid_grant':\n                            onInvalidGrant(function () { return _this.fetchAuthorizationCode(); });\n                            break;\n                        default:\n                            break;\n                    }\n                    return Promise.reject(toErrorClass(error));\n                });\n            }\n            return jsonPromise.then(function (json) {\n                var access_token = json.access_token, expires_in = json.expires_in, refresh_token = json.refresh_token, scope = json.scope;\n                var explicitlyExposedTokens = _this.config.explicitlyExposedTokens;\n                var scopes = [];\n                var tokensToExpose = {};\n                _this.state.hasAuthCodeBeenExchangedForAccessToken = true;\n                _this.authCodeForAccessTokenRequest = undefined;\n                var accessToken = {\n                    value: access_token,\n                    expiry: (new Date(Date.now() + (parseInt(expires_in) * 1000))).toString()\n                };\n                _this.state.accessToken = accessToken;\n                if (refresh_token) {\n                    var refreshToken = {\n                        value: refresh_token\n                    };\n                    _this.state.refreshToken = refreshToken;\n                }\n                if (explicitlyExposedTokens) {\n                    tokensToExpose = Object.fromEntries(explicitlyExposedTokens\n                        .map(function (tokenName) { return [tokenName, json[tokenName]]; })\n                        .filter(function (_a) {\n                        var _ = _a[0], tokenValue = _a[1];\n                        return tokenValue !== undefined;\n                    }));\n                    _this.state.explicitlyExposedTokens = tokensToExpose;\n                }\n                if (scope) {\n                    // Multiple scopes are passed and delimited by spaces,\n                    // despite using the singular name \"scope\".\n                    scopes = scope.split(' ');\n                    _this.state.scopes = scopes;\n                }\n                localStorage.setItem(exports.LOCALSTORAGE_STATE, JSON.stringify(_this.state));\n                var accessContext = { token: accessToken, scopes: scopes };\n                if (explicitlyExposedTokens) {\n                    accessContext.explicitlyExposedTokens = tokensToExpose;\n                }\n                return accessContext;\n            });\n        });\n    };\n    OAuth2AuthCodePKCE.prototype.recoverState = function () {\n        this.state = JSON.parse(localStorage.getItem(exports.LOCALSTORAGE_STATE) || '{}');\n        return this;\n    };\n    OAuth2AuthCodePKCE.prototype.setState = function (state) {\n        this.state = state;\n        localStorage.setItem(exports.LOCALSTORAGE_STATE, JSON.stringify(state));\n        return this;\n    };\n    /**\n     * Implements *base64url-encode* (RFC 4648 § 5) without padding, which is NOT\n     * the same as regular base64 encoding.\n     */\n    OAuth2AuthCodePKCE.base64urlEncode = function (value) {\n        var base64 = btoa(value);\n        base64 = base64.replace(/\\+/g, '-');\n        base64 = base64.replace(/\\//g, '_');\n        base64 = base64.replace(/=/g, '');\n        return base64;\n    };\n    /**\n     * Extracts a query string parameter.\n     */\n    OAuth2AuthCodePKCE.extractParamFromUrl = function (url, param) {\n        var queryString = url.split('?');\n        if (queryString.length < 2) {\n            return '';\n        }\n        // Account for hash URLs that SPAs usually use.\n        queryString = queryString[1].split('#');\n        var parts = queryString[0]\n            .split('&')\n            .reduce(function (a, s) { return a.concat(s.split('=')); }, []);\n        if (parts.length < 2) {\n            return '';\n        }\n        var paramIdx = parts.indexOf(param);\n        return decodeURIComponent(paramIdx >= 0 ? parts[paramIdx + 1] : '');\n    };\n    /**\n     * Converts the keys and values of an object to a url query string\n     */\n    OAuth2AuthCodePKCE.objectToQueryString = function (dict) {\n        return Object.entries(dict).map(function (_a) {\n            var key = _a[0], val = _a[1];\n            return key + \"=\" + encodeURIComponent(val);\n        }).join('&');\n    };\n    /**\n     * Generates a code_verifier and code_challenge, as specified in rfc7636.\n     */\n    OAuth2AuthCodePKCE.generatePKCECodes = function () {\n        var output = new Uint32Array(exports.RECOMMENDED_CODE_VERIFIER_LENGTH);\n        crypto.getRandomValues(output);\n        var codeVerifier = OAuth2AuthCodePKCE.base64urlEncode(Array\n            .from(output)\n            .map(function (num) { return PKCE_CHARSET[num % PKCE_CHARSET.length]; })\n            .join(''));\n        return crypto\n            .subtle\n            .digest('SHA-256', (new TextEncoder()).encode(codeVerifier))\n            .then(function (buffer) {\n            var hash = new Uint8Array(buffer);\n            var binary = '';\n            var hashLength = hash.byteLength;\n            for (var i = 0; i < hashLength; i++) {\n                binary += String.fromCharCode(hash[i]);\n            }\n            return binary;\n        })\n            .then(OAuth2AuthCodePKCE.base64urlEncode)\n            .then(function (codeChallenge) { return ({ codeChallenge: codeChallenge, codeVerifier: codeVerifier }); });\n    };\n    /**\n     * Generates random state to be passed for anti-csrf.\n     */\n    OAuth2AuthCodePKCE.generateRandomState = function (lengthOfState) {\n        var output = new Uint32Array(lengthOfState);\n        crypto.getRandomValues(output);\n        return Array\n            .from(output)\n            .map(function (num) { return PKCE_CHARSET[num % PKCE_CHARSET.length]; })\n            .join('');\n    };\n    return OAuth2AuthCodePKCE;\n}());\nexports.OAuth2AuthCodePKCE = OAuth2AuthCodePKCE;\n"],
  "mappings": "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",
  "names": ["d", "b", "ErrorOAuth2", "ErrorUnknown", "ErrorNoAuthCode", "ErrorInvalidReturnedStateParam", "ErrorInvalidJson", "ErrorInvalidScope", "ErrorInvalidRequest", "ErrorInvalidToken", "ErrorAuthenticationGrant", "ErrorUnauthorizedClient", "ErrorAccessDenied", "ErrorUnsupportedResponseType", "ErrorServerError", "ErrorTemporarilyUnavailable", "ErrorAccessTokenResponse", "ErrorInvalidClient", "ErrorInvalidGrant", "ErrorUnsupportedGrantType", "ErrorWWWAuthenticate", "a", "OAuth2AuthCodePKCE", "fetch", "_a"]
}
